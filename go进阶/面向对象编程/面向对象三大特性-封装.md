# 封装

1. 封装的概念

   封装就是把抽象出来的字段和对字段的操作封装在一起，数据被保护在内部，程序的其他包只有通过被授权的操作（方法），才能对字段进行操作。

2. 封装的理解和好处：

   1. 隐藏实现细节
   2. 可以对进行数据进行验证，保证安全合理

3. 如何体现封装

   1. 对结构体的属性进行封装
   2. 通过方法，包 实现封装

4. 封装的实现步骤：

   1. 将结构体、字段（属性）的首字母小写（不能导出，以及其他包不能使用，类似于private）

   2. 给结构体所在的包提供一个工厂模式的函数，首字母大写。类似于一个构造函数

   3. 提供一个首字母大写的Set方法，用于对属性判断并赋值

      ```go
      func(var 结构体类型名) SetXxx(参数列表)(返回值列表){
          //代码逻辑
          var.字段 = 参数
      }
      ```

   4. 提供一个首字母大写的Get方法（类似于其他语言的public），用于获取属性的值

      ```go
      func (var 结构体类型) GetXxx(){
          return var.字段
      }
      ```


5. 封装的实例练习：

   创建程序，在model包中定义Account结构体：在main函数中体会Golang的封装性

   1. Account结构体要求具有字段：账号（长度在6-10之间）、余额必须大于20元，密码必须是六位

   2. 通过SetXxx的方法给Account的字段赋值

   3. 在main函数中测试

      - main函数包

      ```go
      package main
      
      import (
      	"awesomeProject/gocode/textproject02/account/model"
      	"fmt"
      )
      
      func main() {
      	var account = model.NewAccount("qwez", "123456", 251.48)
      	//account.SetUsername("qwezxc")
      	//account.SetPassword("123456")
      	//account.SetSalary(251.48)
      	if account == nil {
      		fmt.Println("创建账户失败")
      		return
      	}
      	fmt.Printf("该账户的信息为：账号：%v, 密码：%v, 余额：%v", account.GetUsername(), account.GetPassword(), account.GetSalary())
      }
      ```

      - model包，包含结构体

      ```go
      package model
      import "fmt"
      type account struct {
      	username string
      	password string
      	salary   float64
      }
      func NewAccount(username, password string, salary float64) *account {
      	acc := &account{}
      	if len(username) < 6 || len(username) > 10 {
      		fmt.Println("输入的账号长度不在6-10之间")
      		return nil
      	}
      	if len(password) != 6 {
      		fmt.Println("密码必须是六位")
      		return nil
      	}
      	if salary <= 20 {
      		fmt.Println("余额必须大于20元")
      		return nil
      	}
      	// 使用已有的设置方法进行验证和赋值
      	acc.SetUsername(username)
      	acc.SetPassword(password)
      	acc.SetSalary(salary)
      	return acc
      }
      func (account *account) SetUsername(username string) {
      	account.username = username
      }
      func (account *account) GetUsername() string {
      	return account.username
      }
      func (account *account) SetPassword(password string) {
      	account.password = password
      }
      func (account *account) GetPassword() string {
      	return account.password
      }
      func (account *account) SetSalary(salary float64) {
      	account.salary = salary
      }
      func (account *account) GetSalary() float64 {
      	return account.salary
      }
      ```

​			